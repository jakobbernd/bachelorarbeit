\ProvidesPackage{./config/preamble}


%-- Basics für graphische Sachen
\usepackage[usenames,x11names]{xcolor} % Die Optionen definieren zusätzliche Farben (siehe Dokumentation)
\usepackage[final]{graphicx}

\definecolor{dark_gray}{gray}{0.45}
\definecolor{light_gray}{gray}{0.6}
\definecolor{fb10_blue}{cmyk}{0.8,0.4,0.13,0.07}
\definecolor{DarkBlue}{RGB}{18,50,105}


%-- typografische Verbesserungen, Codierungskram, Schriftwahl und erste Mathepakete
\usepackage[utf8]{inputenc}
\usepackage[lining,semibold]{libertine}
% \usepackage[T1]{fontenc}
% \usepackage{textcomp} % verhindert ein paar Fehler bei den Fonts
\usepackage[varl]{zi4}
\usepackage{mathtools}
\usepackage{amssymb}
\usepackage{amsthm} % Verbesserung von amsmath (die amsmath selbst lädt)
\usepackage[libertine,cmintegrals,bigdelims,varbb]{newtxmath}
\usepackage[english]{babel}
\usepackage[babel=true, tracking=true,final]{microtype}

\usepackage{xparse} %if-then-else stuff
% \useosf % aktiviert sog. "old style figures", also werden Zahlen – im Text – teilweise unterhalb der Grundlinie angezeigt. Muss man mögen...


%-- Alternative Konfiguration mit XeLaTeX, die ein großes "ß" anzeigen kann!
%-- ACHTUNG: wenn diese benutzt werden soll, dan MUSS man in der ersten Zeile von bachelor.tex "pdflatex" durch "xelatex" ersetzen und natürlich den obigen Block auskommentieren und diesen wiederrum aktivieren!!!

% \usepackage{lmodern}
% \usepackage{mathtools,amssymb,amsthm} % Verbesserung von amsmath (die amsmath selbst lädt)
% \usepackage[libertine,cmintegrals,bigdelims,varbb]{newtxmath}
% \usepackage[no-math]{fontspec}
% \usepackage{polyglossia} % moderner babel-ersatz
% \setmainlanguage[spelling=new,babelshorthands=true]{german}
% \shorthandoff{"}
% \defaultfontfeatures{Mapping=tex-text, Ligatures={Required,Common,Contextual}}
% \setmainfont{LinLibertine}[Extension=.otf,UprightFont=*_R,BoldFont=*_RZ,ItalicFont=*_RI,BoldItalicFont=*_RZI,ItalicFeatures={Ligatures=Historical}]
% \setsansfont{LinBiolinum}[Scale=MatchUppercase, Extension=.otf, UprightFont=*_R, BoldFont=*_RB, ItalicFont=*_RI,BoldItalicFont=*_RBO]
% \setmonofont{Inconsolatazi4}[Scale=MatchUppercase,Extension=.otf,UprightFont=*-Regular,BoldFont=*-Bold,StylisticSet=1]
% \usepackage[final]{microtype}



%-- Zeilenabstand einstellen
\usepackage{setspace}
% Nun kann man, wenn gewünscht den Zeilenabstand zum Beispiel auf 1,5 setzen mit \onehalfspacing

%-- Der subscript beim a' war tiefer als bei a, damit ist das gefixt
\usepackage{subdepth}

\newcommand{\command}[1]{\texttt{\textbackslash{}#1}}

\newcommand{\qqq}{\qquad \qquad \qquad}

\usepackage{subcaption}
%-- entfernt die Latex-Absatz-Einrückung
\setlength\parindent{0pt} 

%left sub- or superscripts
\usepackage{leftidx}

%-- Quotienten-objekte
\usepackage{faktor}

%--\adj gibt das symbol für eine adjunction
\DeclareRobustCommand{\xjoinrel}{\mathrel{\mkern-3.5mu}}
\newcommand{\adj}{%
  \mathrel{-}
  \xjoinrel
  \mathrel{|}
}

%--um B doppelpfeil A darzustellen
\newcommand{\adjar}[2]{\begin{tikzcd}[cramped,column sep = small,ampersand replacement=\&]
	\cat{#1} \ar[r,shift left = .60ex]
	  \& 
	\cat{#2} \ar[l,shift left = .60ex]
\end{tikzcd}}

%-- Mathematikpakete und Einstellungen
\mathtoolsset{centercolon} % sorgt dafür dass := und =: besser aussehen
\usepackage{mathdots} % sorgt dafür, dass Punkte wie zB \ddots besser aussehen
\newcommand{\Underbrace}[2]{{\underbrace{#1}_{#2}}} % Underbrace als Befehl in LaTeX-Syntax (und ohne Spacing-Probleme mit nachfolgenden Operatoren...)
%\renewcommand{\le}{\leqslant} % ich finde Kleinergleich mit schrägen Strich schöner
%\renewcommand{\ge}{\geqslant}

%-- charakteristische-Funktion-/Indikatorfunktion-Eins '\ind'
\usepackage{silence}
\WarningFilter{latexfont}{Size substitutions with differences}
\WarningFilter{latexfont}{Font shape `U/bbold/m/n' in size}
\DeclareSymbolFont{bbold}{U}{bbold}{m}{n}
\DeclareSymbolFontAlphabet{\mathbbold}{bbold}
\newcommand{\ind}{\mathbbold{1}} 

%-- Ein sehr hübscher Mengen-Befehl
\newcommand\SetSymbol[1][]{\nonscript\:#1\vert\allowbreak\nonscript\:\mathopen{}}
\providecommand\given{} % to make it exist
\DeclarePairedDelimiterX\set[1]\{\}{\renewcommand\given{\SetSymbol[\delimsize]}#1}
%-- schönere leere Menge
\let\oldemptyset\emptyset
\let\emptyset\varnothing

%-- Klammern, Skalarprodukt und Norm
\DeclarePairedDelimiter{\enbrace}{(}{)}
\DeclarePairedDelimiter{\abs}{|}{|}
\DeclarePairedDelimiterX\skal[2]{\langle}{\rangle}{#1\,\delimsize\vert\,#2}
\DeclarePairedDelimiter{\norm}{\lVert}{\rVert}
\DeclarePairedDelimiter{\hull}{\langle}{\rangle_c}
\DeclarePairedDelimiter{\subgroup}{\langle}{\rangle}

%-- Differentialrechnung
\newcommand{\mathd}{\mathrm{d}\mkern-0.5mu}
\newcommand{\diff}[2]{\frac{{\partial #1}}{{\partial #2}} }
\newcommand{\diffd}[2]{\frac{\mathd #1}{\mathd #2} }

%-- eigene Befehle
\DeclareMathOperator{\id}{id}
%\DeclareMathOperator{\Hom}{Hom}

%Hom-Befehl mit oder ohne subscript (sehr cool):
% ruft man \Hom ohne argument auf, wird einfach "Hom" in aufrechter
% Schrift ausgegeben, ruft man jedoch z.b. \Hom[A] auf,
% wird A fett gemacht und als Subscript an Hom drangepackt
\NewDocumentCommand{\Hom}{o}{%
  % <code>
  \IfNoValueTF{#1}
    {\operatorname{Hom}}
    {\operatorname{Hom}_{\cat{#1}}}%
  % <code>
}

\newcommand{\eps}{\varepsilon}
\newcommand{\nat}[3][\eta]{#1 \colon #2 \Rightarrow #3}

\newcommand{\N}{\mathbb{N}}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\R}{\mathbb{R}}
\newcommand{\F}{\mathbb{F}}
\newcommand{\Fp}{\mathbb{F}_p}
\newcommand{\W}{\mathbb{W}}
\renewcommand{\P}{\mathbb{P}}
\newcommand{\A}{\mathbb{A}}

\newcommand{\hin}{(\Rightarrow)}
\newcommand{\rueck}{(\Leftarrow)}


\newcommand{\cat}[1]{
  \mathbf{#1}
  }


\newcommand{\pt}{\{\ast\}} %one-point-set

\newcommand{\ptspaces}{\cat{Set_{\ast}}} %category of pointed spaces

\newcommand{\tensor}{\otimes} %tensor product

% Steffen's line break
\newcommand{\sectiondone}{\hfill \break \rightline{\mbox{\rotatebox{145}{${\|}$}}}}

% Steffen's small qed
\newcommand{\smallqed}{\mbox{\rotatebox{145}{${\|}$}}}

%theorem umgebung neu
% Claim and smallproof --------------------------------------------------------
% For use inside of proofs.

\newcounter{claimcount}
\setcounter{claimcount}{-1}
\newenvironment{bigproof}{%
	\setcounter{claimcount}{0}
	\begin{beweis}
}{%
	\end{beweis}
	\setcounter{claimcount}{-1}
}

% \newtheorem{claim}[claimcount]{Claim}

% \newtheorem*{claim*}{Claim}



\newenvironment{smallproof}{%
	\renewcommand{\qedsymbol}{\smallqed}
	\vspace{-0.7em}
	\begin{proof}[Proof of claim\ifnum\c@claimcount<1 
		\else
			\:\theclaimcount 
		\fi]
}{%
	\end{proof}
	\renewcommand{\qedsymbol}{\square}
}

% -----------------------------------------------------------------------------



%-- kommutative Diagramme
\usepackage{tikz-cd} %-- meiner Meinung nach das beste Paket für kommutative Diagramme
% \tikzset{% um Kompatibilität mit Babel herzustellen und die angenehme "<label>"-Syntax zu nutzen
%   every picture/.append style={
%     execute at begin picture={\shorthandoff{"}},
%     execute at end picture={\shorthandon{"}}
%   }
% }
%changed the design of the arrow to "Straight Barb" instead of "Latex" or "Computer Modern Rightarrow"
\tikzcdset{every arrow/.append style = -{Straight Barb[scale=0.9]}}

\usetikzlibrary{quotes,babel}

%-- Für Literaturangaben, hier wird NICHT das total veraltete bibtex benutzt!
\usepackage[%
	backend=biber,
	sortlocale=auto,
	natbib,
	hyperref,
	backref,
	language=english,
	style=alphabetic % eine unvollständige Auswahl von Styles: ieee, numeric, apa
	]%
{biblatex}
\addbibresource{./config/quellen.bib} % Literaturdatei einlesen
%muss geändert werden zwischen bachelorarbeit und section!!!
%.. für BA und . für sectiontest

% -- Konfiguration von Hyperref (sorgt für anklickbare Links und ein PDF-Inhaltsverzeichnis)
\usepackage[hidelinks, pdfpagelabels, bookmarksopen=true, bookmarksnumbered=true, linkcolor=black, urlcolor=SkyBlue2, plainpages=false,pagebackref, citecolor=black, hypertexnames=true, pdfborderstyle={/S/U}, linkbordercolor=SkyBlue2, colorlinks=false, backref=false]{hyperref}
\hypersetup{final}

%-- Für Aufzählungen und andere Listen, Anführungszeichen und Zitate
\usepackage[shortlabels]{enumitem} % durch die Option ist die gleiche Syntax wie zB mit dem Paket paralist möglich
\setlist[enumerate,description]{font=\sffamily\bfseries} % sorgt dafür, dass die Labels bei enumerate und description fett sind
\usepackage[german=quotes]{csquotes}
% \setlist[itemize]{noitemsep, topsep=0pt} setzt global alle listen schmal
%-- Für hilfreiche Anmerkungen am Seitenrand
\usepackage[obeyDraft,textsize=small,backgroundcolor=yellow,linecolor=black]{todonotes}

\newenvironment{itemize1}{
  \begin{itemize}[noitemsep,topsep=0pt,leftmargin=*,itemindent=0pt]{
      }}{\end{itemize}}


%-- Diagramme captionen
\usepackage{caption}
\usepackage{subcaption}
\captionsetup[figure]{skip=-2mm} % You can adjust the value (e.g., 5pt) as needed

%-- commands zum captioning
\newcommand{\refunitality}{\hyperref[dia: unitality]{unitality} }
\newcommand{\refassociativity}{\hyperref[dia: associativity]{associativity} }

%--damit das diagramm genau an der Stelle steht
\usepackage{float}

%-- Kopf- und Fußzeilen bearbeiten
\usepackage[draft=false]{scrlayer-scrpage}
\pagestyle{scrheadings}
\automark[section]{chapter} % definiert, welcher Text in den Kolumnentiteln erscheinen soll
\rohead{\rightmark} % section erscheint rechts oben
\lehead{\scshape\leftmark} % chapter erscheint links oben in ist in small caps gesetzt
\ofoot[\pagemark]{\pagemark} % Seitenzahlen immer außen, hier wir auch der plain Stil bearbeitet!
% \ifoot[Monads, Comonads and Witt Vectors]{Monads, Comonads and Witt Vectors}
\renewcommand*{\pnumfont}{\LARGE\sffamily} % Seitenzahlen in groß und serifenlos
\renewcommand*{\footfont}{\large\sffamily\color{gray}}
\renewcommand*{\headfont}{\normalfont}



%-- Theorem-Pakete und Konfiguration
\usepackage{thmtools}

\usepackage{bookmark} 
% Theoreme als PDF-Lesezeichen
\bookmarksetup{open,numbered}
\makeatletter
\newcommand*{\theorembookmark}{%
  \bookmark[
    dest=\@currentHref,
    rellevel=1,
    keeplevel,
  ]{%
    \thmt@thmname\space\csname the\thmt@envname\endcsname
    \ifx\thmt@shortoptarg\@empty
    \else
      \space(\thmt@shortoptarg)%
    \fi
  }%
}   
\makeatother


%-- Definition-Style
\newtheoremstyle{definition}
  {\topsep}   % ABOVESPACE
  {\topsep}   % BELOWSPACE
  {\normalfont}  % BODYFONT
  {0pt}       % INDENT (empty value is the same as 0pt)
  {\sffamily\bfseries} % HEADFONT
  {.}         % HEADPUNCT
  {5pt plus 1pt minus 1pt} % HEADSPACE
  {}          % CUSTOM-HEAD-SPEC


\declaretheoremstyle[%
	headfont=\sffamily\bfseries,
	notefont=\normalfont\sffamily,
	bodyfont=\itshape, %in theoremen ist der text kursiv, vorher: \normalfont
	headformat= \NAME \ \NUMBER\NOTE, %format des titels
	headpunct={},
	postheadspace=1ex,
	% shaded={bgcolor=light_gray!20}, %farbiger kasten
	postheadhook=\theorembookmark,
	spaceabove=15pt,spacebelow=10pt,]%
{mainstyle}
\declaretheoremstyle[%
	headfont=\bfseries\scshape,
	bodyfont=\normalfont,
	headpunct=:,
	postheadspace=1ex,
	spacebelow=12pt,spaceabove=2pt,
	qed=\qedsymbol]%
{beweise}
\declaretheoremstyle[%
	headfont=\sffamily\bfseries,
	notefont=\normalfont\sffamily,
	bodyfont=\normalfont,
	headformat= \NAME \ \NUMBER\NOTE, %format des titels
	headpunct=:,
	postheadspace=1ex,
	postheadhook=\theorembookmark,
	spaceabove=3pt,spacebelow=3pt,]%
{claim}
%
\declaretheorem[name=Definition,numbered=no,style=definition,shaded={bgcolor=fb10_blue!10}]{definition}
\declaretheorem[name=Theorem,parent=chapter,style=mainstyle]{theorem}
\declaretheorem[name=Corollary,sharenumber=theorem,style=mainstyle]{cor}
\declaretheorem[name=Lemma,sharenumber=theorem,style=mainstyle]{lemma}
\declaretheorem[name=Proposition,sharenumber=theorem,style=mainstyle]{proposition}

\declaretheorem[name=Remark,numbered=no,style=definition]{remark}

\declaretheorem[name=Proof,numbered=no,style=beweise]{beweis}
\declaretheorem[name=Example,numbered=yes,style=definition]{example}

\declaretheorem[name=Claim,numbered=yes,style=claim]{claim}
\declaretheorem[name=Claim,numbered=no,style=claim]{claim*}
% Customize environments mit Strich links
\RequirePackage{mdframed}
\newmdenv[
	topline=false,
	bottomline=false,
	rightline=false,
	innertopmargin=-10pt,
	innerbottommargin=0pt,
	innerrightmargin=0pt,
	rightmargin=0pt,
	linecolor=DarkBlue,
	linewidth=2pt
]{bluetheoremline}
\newmdenv[
	topline=false,
	bottomline=false,
	rightline=false,
	innertopmargin=-10pt,
	innerbottommargin=0pt,
	innerrightmargin=0pt,
	rightmargin=0pt,
	linecolor=fb10_blue!30,
	linewidth=2pt
]{graytheoremline}
\RequirePackage{etoolbox}

\BeforeBeginEnvironment{theorem}{\begin{bluetheoremline}}
\AfterEndEnvironment{theorem}{\end{bluetheoremline}}
\BeforeBeginEnvironment{lemma}{\begin{graytheoremline}}
\AfterEndEnvironment{lemma}{\end{graytheoremline}}
\BeforeBeginEnvironment{proposition}{\begin{graytheoremline}}
\AfterEndEnvironment{proposition}{\end{graytheoremline}}
\BeforeBeginEnvironment{cor}{\begin{graytheoremline}}
\AfterEndEnvironment{cor}{\end{graytheoremline}}
