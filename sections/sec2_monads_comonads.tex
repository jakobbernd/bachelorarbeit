\chapter{Monads and Comonads}
\section{Definition of Monads and Comonads}
A central notion in algebra is that of a \textit{monoid},
that is, a set $M$ equipped with a map 
\todo{definitionen nicht nummerieren?}
$\mu \colon M \times M \to M$; $(a,b) \mapsto a \cdot b$ 
(often called \textit{multiplication}) and an element $e \in M$
such that the following two axioms hold:
\begin{align}
    \label{eq: associativity for a monoid}  \tag{associativity} 
    (a \cdot b) \cdot c = a \cdot (b \cdot c) 
    \quad &\text{for all} \ a,b,c \in M. \\
    \label{eq: identity element for a monoid} \tag{identity element}
    e \cdot a = a \cdot e = a \quad &\text{for all} \ a \in M 
\end{align}
We can give an equivalent definition in terms of maps and commuting diagrams as follows:
A \textit{monoid} is a set $M$ together with two functions 
\[
    \mu \colon M \times M \to M, \quad 
    e \colon \pt \to M
\]
such that the following diagrams commute: \\

\begin{figure}[H]
    \centering
    \begin{subfigure}{0.4\textwidth}
    \centering
    %\phantomsection\label{name1}
        \begin{tikzcd}
            M \times M \times M \ar[r,"\id \times \mu"] \ar[d,"\mu \times \id"] 
              & M \times M \ar[d,"\mu"] \\
            M \times M \ar[r,"\mu"]
              & M
        \end{tikzcd}
    %\caption*{(cap1)}
    \end{subfigure}
    \hspace{2em}
    \begin{subfigure}{0.4\textwidth}
    \centering
    %\phantomsection\label{name2}
        \begin{tikzcd}
            \pt \times M \ar[rd,"l"'] \ar[r, "e \times \id"] 
            & M \times M \ar[d,"\mu"] 
            & M \times \pt \ar[l,"\id \times e"'] \ar[ld,"r"]\\
            & M
        \end{tikzcd}
    %\caption*{(cap2)}
    \end{subfigure}
    \end{figure}


where $\id$ is the identity on m, and $l$ and $r$ are the canonical bijections
\begin{align*}
    &l \colon \pt \times M \to M;\ l(\ast,m) = m \\
    &r \colon M \times \pt \to M;\ r(m,\ast) = m.
\end{align*}

Explicitly, the first diagram means that for all $a,b,c \in M$:
\[
    (a \cdot b) \cdot c = a \cdot (b \cdot c) 
    \quad \text{for all} \ a,b,c \in M.
\]
which is verbatim the~\ref{eq: associativity for a monoid} axiom, the second diagram means that for all $m \in M$:
\[
  e(\ast) \cdot m = l(\ast,m) = m = r(m,\ast) = m \cdot e(\ast)  
\]
which is clearly the~\ref{eq: identity element for a monoid} axiom 
for the element $e(\ast)$.
This motivates the following definition: \todo{monoid/monad/ monoid object}
\begin{definition}[Monad]
A \textit{Monad} $(T,\mu, \eta) $ in a category $\cat{X}$ consists of
\begin{itemize}
    \item an endofunctor $T\colon \cat{X} \to \cat{X}$
    \item a natural transformation $\eta \colon \id_\cat{X} \Rightarrow T$ 
    \item a natural transformation $\mu\colon T^2 \Rightarrow T $
\end{itemize}  
such that the following diagrams commute: \\
% der ' nach dem Text Ã¤ndert die Position der Pfeil-Beschriftung
\begin{figure}[H]
    \centering
    \begin{subfigure}{0.3\textwidth}
        \centering
        \phantomsection\label{dia: associativity}
        % Content of the first subfigure
        \begin{tikzcd}
            T^3 \ar[r,"T\mu",Rightarrow] \ar[d,"\mu T"',Rightarrow] 
            & T^2 \ar[d,"\mu",Rightarrow] \\
            T^2 \ar[r,"\mu",Rightarrow]
            & T
        \end{tikzcd}
        \caption*{(associativity)}
    \end{subfigure}
    \hspace{2em}
    \begin{subfigure}{0.3\textwidth}
        \centering
        \phantomsection\label{dia: unitality}
        \begin{tikzcd}
            T \ar[rd,"\id_T"',Rightarrow] \ar[r, "\eta T",Rightarrow] 
        & T^2 \ar[d,"\mu",Rightarrow] 
        & T \ar[l,"T \eta"',Rightarrow] \ar[ld,"\id_T",Rightarrow]\\
        & T
        \end{tikzcd}
        \caption*{(unitality)}
    \end{subfigure} 
\end{figure}

In terms of components,~\refassociativity and~\refunitality mean that for every object $x$ of $\cat{X}$
the following diagrams commute:

\begin{figure}[H]
\centering
\begin{subfigure}{0.4\textwidth}
\centering
%\phantomsection\label{name1}
\begin{tikzcd}
    T(T(Tx)) \ar[r,"T(\mu_x)"] \ar[d,"\mu_{Tx}"'] 
    & T(Tx) \ar[d,"\mu_x"] \\
    T(Tx) \ar[r,"\mu_x"]
    & Tx
\end{tikzcd}
\caption*{(associativity)}
\end{subfigure}
\hspace{2em}
\begin{subfigure}{0.4\textwidth}
\centering
%\phantomsection\label{name2}
\begin{tikzcd}
    Tx \ar[rd,"\id_{Tx}"'] \ar[r, "\eta_{Tx}"] 
    & T(Tx) \ar[d,"\mu_x"] 
    & Tx \ar[l,"T(\eta_x)"'] \ar[ld,"\id_{Tx}"]\\
    & Tx
\end{tikzcd}
\caption*{(unitality)}
\end{subfigure}
\end{figure}

\end{definition}

\begin{example}[preorder]
Recall: A \textit{preorder} $(\cat{P},\le)$ is a category with $\cat{P}$ as objects and 
a morphism between $X$ and $Y$ iff $X \le Y$.
A functor $T\colon \cat{P} \to \cat{P}$ is thus a monotonic function $\cat{P}\to \cat{P}$
($x \le y \implies Tx\le Ty$).
The existence of the natural transformations $\eta$ is equivalent to
\[x \le Tx \ \forall x \in \cat{P}\]
and the existence of $\mu$ is equivalent to
\[T(Tx) \le Tx \ \forall x \in \cat{P}\] 
because there is at most one morphism $x \to y$, so the neccessary diagrams commute trivially.\\
Now suppose $\cat{P}$ is a \textit{partial order}, i.e. $x \le y \le x \implies x = y \ \forall x,y \in \cat{P}$. \\
Then:
\begin{align*}
    x \le Tx \implies Tx \le T(Tx) \\
    T(Tx) \le Tx \implies Tx = T(Tx)
\end{align*}
so a Monad $T$ in a partial order $\cat{P}$ is a \textit{closure operation} in $\cat{P}$, i.e. 
a monotonic function $T \colon \cat{P} \to \cat{P}$ 
with $x \le Tx$ and $T(Tx)=Tx \ \forall x \in \cat{P}.$ \\
Now every topological space $X$ induces a partial order $\cat{P} = (\mathscr{P}(X),\subseteq)$.
Here an example for a closure operation is taking the topological closure $A \mapsto \overline{A}$,
since it holds for all $A \subseteq X$ that $A \subseteq \overline{A}$ and
$\overline{\overline{A}} = \overline{A}$.
\end{example}

\begin{example}[M-action Monad]
    Let $(M,\cdot,1)$ be a monoid. Then for each set $X$ we can form the set $X \times M$ and 
    for a map $f \colon X \to Y$ we have a map $f \times \id_M \colon X \times M \to Y \times M;
    (x,m) \mapsto (f(x),m)$. This is functorial and the functor canonically has the structure of 
    a Monad, induced by the monoid structure of M. 
    \begin{itemize}
        \item The unit $\eta$ is defined by
            $\eta_X \colon X \to X \times M;
            x \mapsto (x,1)$
        \item The multiplication $\mu$ is defined by 
           $ \mu_X \colon X \times M \times M \to X \times M;
            (x,m,n) \mapsto (x,m \cdot n)$
    \end{itemize}
    These are clearly natural maps and the Monad axioms follow directly from the monoid axioms for $M$,
    if we look at the corresponding diagrams:
    \begin{figure}[H]
    \centering
    \begin{subfigure}{0.4\textwidth}
    \centering 
    %\phantomsection\label{name1}
    \begin{tikzcd}
        X \times M \times M \times M \arrow[r,"\mu_x \times \id_M"]  \arrow[d,"\mu_{X \times M}"] 
            & X \times M \times M \arrow[d,"\mu_X"] \\
        X \times M \times M \arrow[r,"\mu_X"]
            & X \times M
    \end{tikzcd}
    %\caption*{(cap1)}
    \end{subfigure}
    \hspace{2em}
    \begin{subfigure}{0.4\textwidth}
    \centering
    %\phantomsection\label{name2}
    \begin{tikzcd}
        X \times M \ar[rd,"\id_{X \times M}"'] \ar[r, "\eta_X \times M"] 
        & X \times M \times M \ar[d,"\mu_X"] 
        & X \times M \ar[l,"\eta_x \times \id_M"'] \ar[ld,"\id_{X \times M}"]\\
        & X \times M
    \end{tikzcd}
    %\caption*{(cap2)}
    \end{subfigure}
    \end{figure}
    The~\refassociativity axiom means that $(m \cdot n) \cdot k = m \cdot (n \cdot k)$ 
    which is just the~\ref{eq: associativity for a monoid} axiom for the monoid M,
    while~\refunitality means that $1\cdot m = m = m \cdot 1$ which holds by
    the~\ref{eq: identity element for a monoid} axiom for $M$.
    We will call this Monad on $\cat{Set}$ the \textit{M-action Monad}, the reason for this name will
    be clear once we look at it's algebras, see Section~\ref{sec: Eilenberg-Moore-Category}.
\end{example}
\begin{example}[Maybe monad]
    The \textit{Maybe Monad} $Y \colon \cat{Set} \to \cat{Set}$ is defined by
    $X \mapsto X \cup \pt$ where $f \colon X \to Y$ gets mapped to the function
    $Y(f) \colon X \cup \pt \to Y \cup \pt$ which maps $x$ to $f(x)$ and $\ast$ to $\ast$. 
    \begin{itemize}
        \item $\eta_X \colon X \to X \cup \pt; x \mapsto x$
        \item $\mu_X \colon X \cup \{\ast_1\}  \cup \{\ast_2\} \to X \cup \pt; x \mapsto x, 
        \ast_1 \mapsto \ast, \ast_2 \mapsto \ast$
    \end{itemize}
\end{example}

\begin{definition}[Comonad]
A \textit{Comonad} $(L,\eps, \omega) $ in a Category $\cat{A}$ consists of
\begin{itemize}
    \item an endofunctor $L\colon \cat{A} \to \cat{A}$
    \item a natural transformation $\eps \colon L \Rightarrow \id_{\cat{A}}$ 
    \item a natural transformation $\omega\colon L \Rightarrow L^2 $
\end{itemize}  
such that the following diagrams commute:

\begin{figure}[H]
\centering
\begin{subfigure}{0.4\textwidth}
\centering
%\phantomsection\label{name1}
    \begin{tikzcd}
        L \ar[r,"\omega",Rightarrow] \ar[d,"\omega"',Rightarrow] 
            & L^2 \ar[d,"L\omega",Rightarrow] \\
        L^2 \ar[r,"\omega L",Rightarrow]
            & L^3
    \end{tikzcd}
\caption*{(coassociativity)}
\end{subfigure}
\hspace{2em}
\begin{subfigure}{0.4\textwidth}
\centering
%\phantomsection\label{name2}
    \begin{tikzcd} 
        & L \ar[ld,"\id_L"',Rightarrow] 
        \ar[rd,"\id_L",Rightarrow] \ar[d,"\omega",Rightarrow] & \\
        L 
        & L^2 \ar[l,"\eps L"',Rightarrow] \ar[r,"L \eps",Rightarrow] 
        & L
    \end{tikzcd}
\caption*{(counitality)}
\end{subfigure}
\end{figure}


In terms of components, this means that for every object $x$ of $\cat{A}$
the following diagrams commute:

\begin{figure}[H]
\centering
\begin{subfigure}{0.4\textwidth}
\centering
%\phantomsection\label{name1}
    \begin{tikzcd}
        Lx \ar[r,"\omega_x"] \ar[d,"\omega_x"'] 
            & L(Lx) \ar[d,"L(\omega_x)"] \\
        L(Lx) \ar[r,"\omega_{Lx}"]
            & L(L(Lx)) 
    \end{tikzcd}
\caption*{(coassociativity)}
\end{subfigure}
\hspace{2em}
\begin{subfigure}{0.4\textwidth}
\centering
%\phantomsection\label{name2}
    \begin{tikzcd}
        & Lx \ar[ld,"\id_{Lx}"'] 
        \ar[rd,"\id_{Lx}"] \ar[d,"\omega_x"] & \\
        Lx 
        & L(Lx) \ar[l,"\eps_{Lx}"'] \ar[r,"L(\eps_x)"] 
        & Lx
    \end{tikzcd}
\caption*{(counitality)}
\end{subfigure}
\end{figure}

\end{definition}
\begin{example}[Reader Comonad]
    Let $E$ be a set. Define a functor $C_E \colon \cat{Set} \to \cat{Set}$ by
    $C_E(X)=X \times E$ and, given $f \colon X \to Y,$ $C_E(f) = f \times \id_E
    \colon X \times E \to Y \times E.$
    We can view $E$ as \dq extra information\dq{} and give $C_E$ a comonadic structure as follows:
    \begin{itemize}
        \item the counit $\eps_X \colon X \times E \to X; (x,e)\mapsto x$ 
         "forgets the extra information"
        \item the comultiplication $\omega_X \colon X \times E \to X \times E \times E;
        (x,e)\mapsto (x,e,e)$ 
        "copies the extra information".
    \end{itemize}
    Now the comonad axioms say that the following diagrams have to commute:
    \begin{figure}[H]
    \centering
    \begin{subfigure}{0.4\textwidth}
    \centering
    %\phantomsection\label{name1}
    \begin{tikzcd}
        X \times E \arrow[r,"\omega_X"] \arrow[d,"\omega_X"] 
          & X \times E \times E \arrow[d,"\omega_X \times \id_E"] \\
        X \times E \times E \arrow[r,"\omega_{X \times E}"]
          & X \times E \times E \times E
    \end{tikzcd}
    %\caption*{(cap1)}
    \end{subfigure}
    \hspace{2em}
    \begin{subfigure}{0.4\textwidth}
    \centering
    %\phantomsection\label{name2}
    \begin{tikzcd}
        & X \times E \ar[ld,"\id_{X \times E}"'] 
        \ar[rd,"\id_{X \times E}"] \ar[d,"\omega_X"] & \\
        X \times E 
        & X \times E \times E \ar[l,"\eps_{X \times E}"'] \ar[r,"\eps_X \times \id_E"] 
        & X \times E
    \end{tikzcd}
    %\caption*{(cap2)}
    \end{subfigure}
    \end{figure}
    The first diagram commutes, because for a tuple $(x,e,e)$, copying the second or 
    third element produces the same tuple. The second diagram commutes, because copying 
    the extra information and the deleting either one of the copies gives the same result.
    The resulting comonad $(C_E,\eps,\omega)$ on $\cat{Set}$ is called the \textit{reader comonad}.
    Note that as a functor, it is almost the same as the \textit{writer comonad}, but we gave it
    kind of a dual structure.
\end{example}


We now consider another example of a comonad; the \textit{free monoid comonad}.
\todo{maybe ins Kapitel Comonaden als Beispiel schieben}
\begin{definition}[monoid ring]
    Let $R$ be a ring and let $G$ be a monoid.
    The \textit{monoid ring} of $G$ over $R$, denoted $R[G]$ or $RG$
    is the set of formal finite sums $\sum_{g \in G}r_g \cdot g$
    with addition and multiplication defined by:
    \begin{align*}
        \big(\sum_{g \in G}r_g \cdot g \big) + \big(\sum_{g \in G}s_g \cdot g \big)
        & := \sum_{g \in G}(r_g + s_g)\cdot g \\
        \big(\sum_{g \in G}r_g \cdot g \big) \cdot \big(\sum_{g \in G}s_g \cdot g\big)
        & := \sum_{g \in G}(\sum_{k \cdot l = g} r_k \cdot s_l)\cdot g 
    \end{align*}
\end{definition}
\begin{example}
    $R = \R, G = \{x^n \mid n \in \N\} \implies RG = \R[X]$
\end{example}
\begin{remark} \label{rem: universal property of monoid ring}
$R[G]$ together with the ring homomorphism $\alpha \colon R \to R[G]$;
$r \mapsto r \cdot 1$ and the monoid homomorphism $\beta \colon 
G \to R[G]$; $g \mapsto 1 \cdot g$ 
enjoys the following universal property:
\[
  \alpha(r) \cdot \beta(g) = \beta(g) \cdot \alpha(r)
   \quad \forall r \in R, g \in G
\]
and if $(S,\alpha',\beta')$ is another such triple with
$\alpha'(r) \cdot \beta'(g) = \beta'(g) \cdot \alpha'(r)
   \quad \forall r \in R, g \in G$,
there is a unique monoid homomorphism $\gamma \colon R[G] \to S$
such that the following diagram commutes:
\[
    \begin{tikzcd}
        & S \\
        R \arrow[r,"\alpha"'] \arrow[ur,"\alpha'"] 
        & R[G] \arrow[u,"\gamma",dotted] 
        & G \arrow[l,"\beta"] \arrow[ul,"\beta'"']
    \end{tikzcd}
\]
Here, $\gamma$ is defined by 
$\sum_{g \in G}r_g \cdot g \mapsto \sum_{g \in G}\alpha'(r_g) \cdot \beta'(g)$.
\end{remark}
\begin{example}
    Let $S$ be a ring, $G$ be a monoid.
    Since there is a unique ring homomorphism $\Z \to S$, 
    each monoid homomorphism $G \to S$ induces a unique ring homomorphism
    $\Z G \to S$ such that the following commutes:
    \[
      \begin{tikzcd}
        G \arrow[r] \arrow[rd] 
        &S \\
        & \Z G \arrow[u]
      \end{tikzcd}
    \]
    Now if $H$ is another monoid and $f \colon G \to H$ a monoid morphism,
    $G \xrightarrow{f} H \to \Z H$ is a monoid homomorphism,
    hence it extends uniquely to $f \colon \Z G \to \Z H$,
    $\sum_{g \in G}r_g \cdot g \mapsto \sum_{g \in G}r_g \cdot f(g)$.\\ 
    In this way, the free monoid ring construction over $\Z$ is functorial.
\end{example}

Let $G \colon \cat{CRing} \to \cat{CMon}$, $(R,+,\cdot) \mapsto (R,\cdot)$
be the forgetful functor and
let $F \colon \cat{CMon} \to \cat{CRing}$ be the functor
$G \mapsto \Z G$. Then the composition $\Z[\_] := F \circ G \colon \cat{CRing} \to \cat{CRing}$
is the functor $R \mapsto \Z R$, which we call the \textit{free monoid ring functor}.
\begin{claim*}
    $\Z[\_]$ is a comonad on $\cat{CRing}$.
\end{claim*}
\begin{beweis}
    Define the counit and comultiplication by
    \begin{figure}[H]
    \centering
    \begin{subfigure}{0.4\textwidth}
    \centering
    %\phantomsection\label{name1}
    \begin{align*}
    \eps_R \colon \Z R &\to R \\
    \sum_{r \in R} a_r \cdot [r] &\mapsto  \sum_{r \in R} a_r \cdot r
    \end{align*}
    %\caption*{(cap1)}
    \end{subfigure}
    \hspace{2em}
    \begin{subfigure}{0.4\textwidth}
    \centering
    %\phantomsection\label{name2}
    \begin{align*}
    \omega_R \colon \Z R &\to \Z \Z R \\
    \sum_{r \in R} a_r \cdot [r] &\mapsto \big[\sum_{r \in R} a_r \cdot [r]\big]
    \end{align*}
    %\caption*{(cap2)}
    \end{subfigure}
    \end{figure}
    those are clearly natural and the following diagrams commute:
    \begin{figure}[H]
        \centering
        \begin{subfigure}{0.4\textwidth}
        \centering
        %\phantomsection\label{name1}
            \begin{tikzcd}
                \Z R \ar[r,"\omega_x"] \ar[d,"\omega_x"'] 
                    & \Z \Z R \ar[d,"L(\omega_x)"] \\
                \Z \Z R \ar[r,"\omega_{Lx}"]
                    & \Z \Z \Z R
            \end{tikzcd}
        \end{subfigure}
        \hspace{2em}
        \begin{subfigure}{0.4\textwidth}
        \centering
        %\phantomsection\label{name2}
            \begin{tikzcd}
                & \Z R \ar[ld,"\id_{Lx}"'] 
                \ar[rd,"\id_{Lx}"] \ar[d,"\omega_x"] & \\
                \Z R 
                & \Z \Z R \ar[l,"\eps_{Lx}"'] \ar[r,"L(\eps_x)"] 
                & \Z R 
            \end{tikzcd}
        \end{subfigure}
        \end{figure}
\end{beweis}
\begin{remark}
   We can define a variation of this, by setting $\underline{\Z}R := \faktor{\Z R}{(0)}$
   where $(0) = \set{r \cdot 0 \mid r \in \Z R }$ is the ideal generated by $0 \in R$.
\end{remark}

\begin{lemma}
    For every object $x$ in $\cat{X}$, the following diagram commutes:
    \[
      \begin{tikzcd}
        T(Tx) \arrow[r,"T(\delta_x)"] \arrow[d,"\delta_{Tx}"] 
            & T(T'x) \arrow[d,"\delta_{T'x}"] \\
          T(T'x) \arrow[r,"T'(\delta_x)"]
            & T'(T'x)
      \end{tikzcd}
    \]
    this means \[
        \delta T' \circ T \delta = T' \delta \circ \delta T
        \colon T^2 \Rightarrow (T')^2.
    \]
    We denote this natural transformation by $\delta \otimes \delta$, since this is
    actually the monoidal product of morphisms in the monoidal category of endofunctors on $\cat{X}$.
\end{lemma}
\begin{beweis}
    $\delta_x \colon Tx \to T'x$ is a ring homomorphism.
    Since $\delta \colon T \Rightarrow T'$ is natural transformation, the square commutes.
\end{beweis}
\begin{definition}[Morphism of monads]
    Let $\cat{X}$ be a category, let $(T,\eta,\mu)$ and $(T',\eta',\mu')$ be monads in $\cat{X}$.
    We say that a natural transformation $\nat[\delta]{T}{T'}$ is a \textit{morphism of monads} if it preserves
    the unit and the multiplication, i.e. the following diagrams commute:

    \begin{figure}[H]
    \centering
    \begin{subfigure}{0.4\textwidth}
    \centering
    %\phantomsection\label{name1}
    \begin{tikzcd}
        \id_T \ar[rd,"\eta'"',Rightarrow] \ar[r, "\eta",Rightarrow] 
        & T \ar[d,"\delta",Rightarrow] \\
        & T'
    \end{tikzcd}
    \caption*{(unit-preserving)}
    \end{subfigure}
    \hspace{2em}
    \begin{subfigure}{0.4\textwidth}
    \centering
    %\phantomsection\label{name2}
    \begin{tikzcd}
        T^2 \ar[r,"\mu",Rightarrow] \ar[d,"\delta \otimes \delta"',Rightarrow] 
        & T \ar[d,"\delta",Rightarrow] \\
        T'^2 \ar[r,"\mu'",Rightarrow]
        & T'
    \end{tikzcd}
    \caption*{(multiplication-preserving)}
    \end{subfigure}
    \end{figure}

    %vadjust allows todo in math-mode   
\end{definition}
\begin{definition}[Morphism of comonads]
    Let $\cat{A}$ be a category, let $(L,\eps,\omega)$ and $(L',\eps',\omega')$ be comonads in $\cat{A}$.
    We say that a natural transformation $\nat[\delta]{L}{L'}$ is a \textit{morphism of monads} if it preserves
    the counit and the comultiplication, i.e. the following diagrams commute:
    \begin{figure}[H]
    \centering
    \begin{subfigure}{0.4\textwidth}
    \centering
    %\phantomsection\label{name1}
    \begin{tikzcd}
        L \ar[r,"\delta",Rightarrow] \ar[rd,"\eps"',Rightarrow]
        & L' \ar[d,"\eps'",Rightarrow] \\
        & \id_A 
    \end{tikzcd}
    \caption*{(counit-preserving)}
    \end{subfigure}
    \hspace{2em}
    \begin{subfigure}{0.4\textwidth}
    \centering
    %\phantomsection\label{name2}
    \begin{tikzcd}
        L \arrow[r,"\omega",Rightarrow] \arrow[d,"\delta",Rightarrow] 
          & L^2 \arrow[d,"\delta \otimes \delta",Rightarrow] \\
        L' \arrow[r,"\omega'",Rightarrow]
          & {L'}^2
    \end{tikzcd}
    \caption*{(comultiplication-preserving)}
    \end{subfigure}
    \end{figure} 
\end{definition}
\begin{example}
    Consider the \textit{subsingletons Monad} $\P^1 \colon \cat{Set} \to \cat{Set}$, which
    assigns to each set $X$ the set of subsets of $X$ containing \textit{at most} one element, so
    an element of $\P^1(X)$ is either $\emptyset$ or a singleton $\{x\}$. For a function 
    $f \colon X \to Y$, the induced function maps $\emptyset$ to $\emptyset$ and $\{x\}$ to 
    $\{f(x)\}$, compare this to the power set functor. If we define the unit $\eta'$ by
    \[
        \eta'_X \colon X \to \P^1(X); x \mapsto \{x\}
    \]
    and the multiplication $\mu'$ by 
    \[
        \mu'_X \colon \P^1(\P^1(X)) \to \P^1(X); \{\{x\}\} \mapsto \{x\},
        \{\emptyset\} \mapsto \emptyset, \emptyset \mapsto \emptyset
    \]
    then the resulting monad looks really similar to the \textit{Maybe Monad}. 
    This is not a coincidence: the map
    \[
        \delta_X \colon X \cup \pt \to \P^1(X); x \mapsto \{x\}, \ast \mapsto \emptyset
    \]
    gives a natural isomorphism $Y \Rightarrow \P^1$ which is indeed an isomorphism of Monads.
    \todo{ausrechnen}


\end{example}

\begin{theorem}[Every adjunction induces a Monad and a Comonad]
    Let $F {\ }_{\eps}^{\text{\tiny{$\eta$}}}\!\!\!\!\adj G \colon \adjar{B}{A}$
    be an adjunction. Then $(GF,\eta,G\eps F)$ is a Monad on $B$ and $(FG,\eps,F\eta G)$ is a Comonad on $A$, which we
    call the Monad respectively Comonad induced by the adjunction.
\end{theorem}
\begin{beweis}
    We have to show that the first of the following diagrams commutes, but
    by removing $G$ from the left and $F$ from the right, it suffices to show that the
    right diagram commutes.
    \begin{figure}[H]
    \centering
    \begin{subfigure}{0.4\textwidth}
    \centering
    %\phantomsection\label{name1}
    \begin{tikzcd}
            GFGFGF \arrow[r,"GFG\eps F",Rightarrow] \arrow[d,"G \eps FGF",Rightarrow] 
              & GFGF \arrow[d,"G \eps F",Rightarrow] \\
            GFGF \arrow[r,"G \eps F",Rightarrow]
              & GF
    \end{tikzcd}
    %\caption*{(cap1)}
    \end{subfigure}
    \hspace{2em}
    \begin{subfigure}{0.4\textwidth}
    \centering
    %\phantomsection\label{name2}
    \begin{tikzcd}
        FGFG \arrow[r,"FG\eps ",Rightarrow] \arrow[d,"\eps FG",Rightarrow] 
          & FG \arrow[d,"\eps",Rightarrow] \\
        FG \arrow[r,"\eps",Rightarrow]
          & \id_{B}
    \end{tikzcd}
    %\caption*{(cap2)}
    \end{subfigure}
    \end{figure}
    The second diagram now commutes by the interchange law for natural transformations.
    To show~\refunitality we need to show that the following diagram commutes.
    \[
        \begin{tikzcd}
            GF \ar[rd,"\id_{GF}"',Rightarrow] \ar[r, "\eta GF",Rightarrow] 
        & GFGF \ar[d,"G \eps F",Rightarrow] 
        & GF \ar[l,"GF \eta"',Rightarrow] \ar[ld,"\id_{GF}",Rightarrow]\\
        & GF
        \end{tikzcd}    
    \]
    but this is essentially the diagrams stating the left and right~\ref{eq:triangle identity of adjunction}
    for the adjunction after applying $F$ respectively $G$.
    The proof that $(FG,\eps,F \eta G)$ is a Comonad on $A$ is dual.
\end{beweis}
Now that we know that every adjunction induces a Monad, one may ask, if the converse is true,
that is if every Monad is induced by an adjunction. We will see that this is the case and there are even 
multiple ways to induce a given Monad $T$. The first one is a construction called the \textit{Eilenberg-Moore-Category}
which is not only useful for forming the adjunction.
\section{The Eilenberg-Moore-Category of a Monad}
\label{sec: Eilenberg-Moore-Category}

\begin{definition}[Eilenberg-Moore-Category]
    Let $T = (T,\eta,\mu)$ be a monad in a category $\cat{X}$.
    A \textit{$T$-algebra} is a pair $(x,h)$ where $x$ is an object of $\cat{X}$ and $h \colon Tx \to x$ is 
    an arrow such that the following diagrams commute:
    \begin{figure}[H]
    \centering
    \begin{subfigure}{0.4\textwidth}
    \centering
    %\phantomsection\label{name1}
    \begin{tikzcd}
        T^2x \arrow[r,"Th"] \arrow[d,"\mu_x"] 
          & Tx \arrow[d,"h"] \\
        Tx \arrow[r,"h"]
          & x
    \end{tikzcd}
    %\caption*{(cap1)}
    \end{subfigure}
    \hspace{2em}
    \begin{subfigure}{0.4\textwidth}
    \centering
    %\phantomsection\label{name2}
    \begin{tikzcd}
        x \ar[r,"\eta_x"] \ar[rd,"id_x"']
        & Tx \ar[d,"h"] \\
        & x 
    \end{tikzcd}
    %\caption*{(cap2)}
    \end{subfigure}
    \end{figure}
    We call $h$ the \textit{stucture map} of $(x,h)$.
    A \textit{morphism of $T$-algebras} $f \colon (x,h) \to (x',h')$ is an arrow
    $f \colon x \to x'$ such that
    \[
        \begin{tikzcd}
            Tx \arrow[r,"Tf"] \arrow[d,"h"] 
            & Tx' \arrow[d,"h'"] \\
            x \arrow[r,"f"]
            & x'
        \end{tikzcd}
    \]
    commutes.
    The set of all $T$-algebras together with their morphisms form a category,
    which is called the \textit{Eilenberg-Moore-Category} and denoted by $\cat{X}^T$.
\end{definition}
\todo{Proof that this is indeed a category?}

\begin{example}[M-action Monad]
    A $T_M$-algebra is a set $X$ together with a map $h \colon X \times M \to X$
    such that 
    \begin{figure}[H]
        \centering
        \begin{subfigure}{0.4\textwidth}
        \centering
        %\phantomsection\label{name1}
        \begin{tikzcd}
            X \times M \times M \arrow[r,"h \times \id_M"] \arrow[d,"\mu_X"] 
              & X \times M \arrow[d,"h"] \\
            X \times M \arrow[r,"h"]
              & X
        \end{tikzcd}
        %\caption*{(cap1)}
        \end{subfigure}
        \hspace{2em}
        \begin{subfigure}{0.4\textwidth}
        \centering
        %\phantomsection\label{name2}
        \begin{tikzcd}
            X \ar[r,"\eta_x"] \ar[rd,"id_x"']
            & X \times M \ar[d,"h"] \\
            & X 
        \end{tikzcd}
        %\caption*{(cap2)}
        \end{subfigure}
        \end{figure}
        commute. If we denote $h(x,m)$ by $(x . m)$, this means that
        $(x . m) . n = x . (m \cdot n)$ and $x . 1 = 1$.
        So $T_M$-algebras are nothing but sets equipped with a right $M$-action.
        In particular, if $M$ is a group, the $T_M$-algebras are just right $M$-sets.
        \todo{all correct? right/left?}
\end{example}
\begin{theorem}[Every monad is defined by its T-algebras]
    Let $(T,\eta,\mu)$ be a monad in a category $\cat{X}$.
    Then there is an adjunction $F^T \adj G^T$, where $F^T$ and $G^T$ are functors
    \begin{tikzcd}
        \cat{X^T} \ar[r,"G^T",shift left = .60ex]
          & 
        \cat{X} \ar[l,"F^T",shift left = .60ex]
    \end{tikzcd}
    such that the monad induced by this adjunction is $(T,\eta,\mu)$.
\end{theorem}
\begin{beweis}
Define $F^T \colon \cat{X} \to \cat{X}^T$ by
\[
    \begin{tikzcd}
        x \arrow[r,mapsto] \arrow[d,"f"]
          & (Tx,\mu_x) \arrow[d,"Tf"] \\
        x' \arrow[r,mapsto]
          & (Tx',\mu_{x'})
    \end{tikzcd}
\]
$(Tx,\mu_x)$ is indeed a $T$-algebra, since $\mu_x$ is an arrow $T^2x \to Tx$
and the diagrams 
\begin{figure}[H]
\centering
\begin{subfigure}{0.4\textwidth}
\centering
%\phantomsection\label{name1}
\begin{tikzcd}
    T^3x \arrow[r,"T(\mu_x)"] \arrow[d,"\mu_{Tx}"] 
      & T^2x \arrow[d,"\mu_x"] \\
    T^2x \arrow[r,"\mu_x"]
      & Tx
\end{tikzcd}
%\caption*{(cap1)}
\end{subfigure}
\hspace{2em}
\begin{subfigure}{0.4\textwidth}
\centering
%\phantomsection\label{name2}
\begin{tikzcd}
    Tx \ar[r,"\eta_{Tx}"] \ar[rd,"id_{Tx}"']
    & T^x \ar[d,"\mu_x"] \\
    & Tx 
\end{tikzcd}
%\caption*{(cap2)}
\end{subfigure}
\end{figure}
are just the commuting diagrams for the~\refassociativity
respectively left~\refunitality axioms from the definition of a Monad.

$Tf \colon (Tx,\mu_x) \to (Tx',\mu_{x'})$ is indeed a morphism of $T$-algebras,
since the commutativity of 
\[
  \begin{tikzcd}
      T^2x \arrow[r,"T^2(f)"] \arrow[d,"\mu_x"] 
        & T^2x' \arrow[d,"\mu_{x'}"] \\
      Tx \arrow[r,"T(f)"]
        & Tx'
  \end{tikzcd}  
\]
is given by naturality of $\mu$. The functoriality of $F^T$ follows from the functoriality
of $T$.

Define $G^T \colon \cat{X^T} \to \cat{X}$ by
\[
    \begin{tikzcd}
        (x,h) \arrow[r,mapsto] \arrow[d,"f"] 
          & x \arrow[d,"f"] \\
        (x',h') \arrow[r,mapsto]
          & x'
    \end{tikzcd}   
\]
so $G$ is just the forgetful functor.
\begin{claim*}
    $G^T \circ F^T = T$ and $F^TG^T(x,h) = (Tx,\mu_x$).
\end{claim*}
\begin{proof}[Proof of claim]
    Let $x \in \cat{X}.$ Then $G^T(F^T(x)) = G^T(Tx,\mu_x) = Tx.$
    Now let $f \colon x \to y$. Then $G^T(F^T(f))=G^t(Tf)=Tf.$
    Finally, $F^TG^T(x,h) = F^T(x) = (Tx,\mu_x).$
\end{proof}
So we can set 
\[
  \eta^T := \eta \colon \id_{\cat{X}} \Rightarrow G^TF^T 
\]
as the unit and we can define $\eps^T \colon F^TG^T \to \id_{\cat{X}^T}$ by
\[
    \eps^T_{(x,h)} := h \colon (Tx,\mu_x) \to (x,h).
\]
$h$ is a morphism of $T$-algebras because $(x,h)$ is a $T$-algebra, since both statements
mean that the diagram 
\[
    \begin{tikzcd}
        T^2x \arrow[r,"Th"] \arrow[d,"\mu"] 
          & Tx \arrow[d,"h"] \\
        T \arrow[r,"h"]
          & x
    \end{tikzcd}
\]
commutes. $\eps^T$ is natural, because if $f \colon (x,h) \to (x',h')$
is a morphism of $T$-algebras, naturality means that the diagram
\[
    \begin{tikzcd}
        Tx \arrow[r,"Tf"] \arrow[d,"h"]
          & Tx' \arrow[d,"h'"] \\
        x \arrow[r,"f"]
          & x'
    \end{tikzcd}
\]
but this is exactly the definition of $f$ being a morphism of $T$-algebras.
\todo{triangle identities and induces T}
\end{beweis}
\begin{theorem}[Comparison of adjunctions with algebras]

\end{theorem}
\section{The Kleisli category of a Monad}
There is another way to induce a Monad by an adjunction:
\begin{definition}[Kleisli category]
    Let $\cat{X}$ be a category, $T = (T,\eta, \mu)$ be a monad in $\cat{X}$.
    The \textit{Kleisli category $\cat{X}_T$} is defined by
    \begin{itemize}
        \item objects the same as in $\cat{X}$, but we relabel $x$ to $x_T$ for all $x \in \cat{X}$.
        \item for $x_T, y_T \in \cat{X}_T$, $f\colon x \to Ty$ is a morphism which we
        denote by $f^b \colon x_T \to y_T$.
        \item composition will be denoted by $\bullet$ for distinction and is defined by
        \[
            g^b \bullet f^b := (\mu_z \circ Tg \circ f)^b \colon x_T \to z_T
        \]
        for $f^b \colon x_T \to y_T$, $g^b \colon y_T \to z_T$. 
        This is indeed again a morphism:
        \begin{tikzcd}
            x \arrow[r,"f"]
              & Ty \arrow[r,"Tg"]
                & T^2z \arrow[r,"\mu_z"]
                  & Tz
        \end{tikzcd}
    \end{itemize}
\begin{claim*}
    This defines a category.
\end{claim*}
\begin{proof}[Proof of claim]
\underline{associativity}: Let
\begin{tikzcd}
    x_T \arrow[r,"f^b"]
      & y_T \arrow[r,"g^b"]
        & z_T \arrow[r,"h^b"]
          & w_T
\end{tikzcd}
be objects and morphisms in the Kleisli category.
\begin{align*}
    (h^b \bullet g^b) \bullet f^b &= (\mu_w \circ Th \circ g)^b \bullet f^b \\
    &= (\mu_w \circ T(\mu_w \circ Th \circ g) \circ f)^b \\
    &= (\mu_w \circ T\mu_w \circ T^2h \circ Tg \circ f)^b.
\end{align*}
Now the~\refassociativity axiom for the Monad T states that
\[
    \begin{tikzcd}
        T(T(Tw)) \ar[r,"T(\mu_w)"] \ar[d,"\mu_{Tw}"'] 
        & T(Tw) \ar[d,"\mu_w"] \\
        T(Tw) \ar[r,"\mu_w"]
        & Tw 
    \end{tikzcd}
\]
commutes, hence 
\[
    (\mu_w \circ T\mu_w \circ T^2h \circ Tg \circ f)^b
    = (\mu_w \circ \mu_{Tw} \circ T^2h \circ Tg \circ f)^b
\]
By naturality of $\mu$, the diagram
\[
    \begin{tikzcd}
        T^2z \arrow[r] \arrow[d] 
          & T^3w \arrow[d] \\
        Tz \arrow[r]
          & T^2w
    \end{tikzcd}
\]
commutes, so it follows that
\begin{align*}
    (\mu_w \circ \mu_{Tw} \circ T^2h \circ Tg \circ f)^b
    &= (\mu_w \circ Th \circ \mu_z \circ Tg \circ f)^b \\
    &= h^b \bullet (g^b \bullet f^b) \\
\end{align*}
\underline{identity axiom}: Let $f^b \colon x_T \to y_T$ be a morphism.
\begin{align*}
    f^b \bullet (\eta_x)^b = (\mu_x \circ Tf \circ \eta_x)^b
    = (\mu_x \circ \eta_{Ty} \circ f)^b
    = (\id_{Ty} \circ f)^b = f^b
\end{align*}
where the second equality follows from the naturality of $\eta$ and 
the third equality is due to the left~\refunitality law for T.
\begin{align*}
    (\eta_y)^b \bullet f^b = (\mu_y \circ T\eta_y \circ f)^b
    =(id_{Ty}\circ f)^b = f^b
\end{align*}
where the second equality is due to the right~\refunitality law for T.
This proves that for $x_T \in \cat{X}_T$ we have $\id_{x_T} = (\eta_x)^b
\in \Hom[\cat{X}_T](x_T,x_T)$
\end{proof}
\begin{theorem}
    There is an adjoint situation $F_T \adj G_T \colon$ 
    \begin{tikzcd}
        \cat{X_T} \ar[r,,shift left = .60ex]
          & 
        \cat{X} \ar[l,,shift left = .60ex]
    \end{tikzcd}
    such that $T$ is the induced monad by this adjunction.
\end{theorem}
\end{definition}