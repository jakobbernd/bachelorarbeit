\chapter{Witt vectors}
\section*{Construction of the witt vectors}

Recall that for every prime number $p$, we have the \textit{p-adic valuation map}:
\begin{definition}[p-adic valuation]
   $v_p \colon \mathbb{Z} \to \mathbb{N} \cup\{\infty\}$
    is defined by 
    \[
        v_p(n)=
        \begin{cases}
        \mathrm{max}\{k \in \mathbb{N} : p^k \mid n\} & \text{if } n \neq 0\\
        \infty & \text{if } n=0
        \end{cases} 
    \]

\end{definition}

\begin{definition}[truncation set]
    Let $\N$ be the set of positive integers and let $S\subseteq
    \N$ be a subset with the property that $\forall n\in \N:$
    if $d$ is a divisor of $n$, then $d\in S$.
    We then say that S is a \textit{truncation set}.
\end{definition}
As a set, we define the \textit{big Witt ring} $\W_S(A)$ to be $A^S$,
we will give it a unique ring structure, such that the \textit{ghost map}
is a ring homomorphism.

\begin{definition}[ghost map]
    We define $w \colon \W_S(A) \to A^S$
    by $(a_n)_{n \in S} \mapsto (w_n)_{n \in S}$ where 
    \[
        w_n = \sum_{d \mid n} d a_d^{n/d}
    \]
\end{definition}
The core of the construction is contained in the following Lemma:
\begin{lemma}[Dwork]\label{lem: dwork}
    Suppose that for every prime number
$p$ there exists a ring homomorphism $\phi_p \colon A \to A$ with
the property that $\phi_p(a) \equiv a^p$ modulo $pA$. Then for every
sequence $x = (x_n)_{n \in S}$, the following 
are equivalent:
\begin{enumerate}[(i)]
\item The sequence $x$ is in the image of the ghost map
$w \colon \mathbb{W}_S(A) \to A^S.$
\item For every prime number $p$ and every $n \in S$
with $v_p(n) \geqslant 1$,
$$x_n \equiv \phi_p(x_{n/p}) \hskip8mm \text{modulo $p^{v_p(n)}A$.}$$
\end{enumerate}    
\end{lemma}
\begin{bigproof}
    $\hin$ Suppose $x$ is in the image of the ghost map, that means there is a sequence 
    $a = (a_n)_{n \in S}$ such that $x_n = w_n(a)$ for all $n \in S$. 
    We calculate:
    \[
        \phi(x_{n/p}) = \phi(w_{n/p}(a)) = \phi(\sum_{d \mid n/p} d a_d^{n/pd}) =
        \sum_{d \mid n/p} d \cdot \phi(a_d^{n/pd}) 
    \] 
    since $\phi$ is a ring homomorphism and $d \in \N$.
    \begin{claim}
        \[
        \sum_{d \mid n/p} d \cdot \phi(a_d^{n/pd}) \equiv 
        \sum_{d \mid n/p} d \cdot a_d^{n/d} \text{\hskip8mm mod} \  p^{v_p(n)}A.
        \]
    \end{claim}
    \begin{smallproof}
        \todo{}
    \end{smallproof}
    
    \begin{claim}
        \[
        \sum_{d \mid n/p} d \cdot a_d^{n/d} \equiv 
        \sum_{d \mid n} d \cdot a_d^{n/d} \text{\hskip8mm mod} \ p^{v_p(n)}A
        \]
    \end{claim} 
    \begin{smallproof}
        \todo{}
    \end{smallproof}
    so we get
    \[
        \phi(x_{n/p}) \equiv \sum_{d \mid n} d \cdot a_d^{n/d} = w_n(a) = x_n \hskip8mm mod \ p^{v_p(n)}A.
        \]
    
    $\rueck$ Let $(x_n)_{n \in S}$ be a sequence such that 
    $x_n \equiv \phi_p(x_{n/p}) \hskip8mm mod \ p^{v_p(n)}A \ \forall p\ $prime$, n\in S, v_p(n) \geqslant 1.$
    Define $(a_n)_{n \in S}$ with $w_n(a) = x_n$ as follows:
    \[a_1 := x_1\]
    and if $a_d$ has been chosen for all $d \mid n$ such that $w_d(a) = x_d$ we see that
    \begin{align*}
            x_n &\equiv \phi_p(x_{n/p}) \hskip8mm mod \ p^{v_p(n)}A \\
                &= \phi_p(\sum_{d \mid n/p} d \cdot a_d^{n/pd}) \\
                &= \sum_{d \mid n/p} d \cdot \phi(a_d^{n/pd})
    \end{align*}
 \todo{finish proof}
\end{bigproof}
We will often need the following
\begin{lemma} \label{lem: injective ghost map}
    if $A$ is a torsion-free ring, the ghost map is injective.
\end{lemma}
Now we can finish the construction of the Witt vectors:
\begin{theorem} \label{thm: existence of witt vectors}
    There exists a unique ring structure such that the ghost map 
    \[
      w:\W_S(A) \to A^s  
    \]
    is a natural transformation of functors from rings to rings.
\end{theorem}
\begin{bigproof}
    
\end{bigproof}
\begin{cor} \label{cor: ghost components are nat trafos}
    $w_n \colon \W_S(A) \to A$ is a natural ring homomorphism for all $n \in S$.
\end{cor}
\begin{proposition} \label{prop: W is a functor}
    $\W_S$ is a functor $\cat{CRing} \to \cat{CRing}$.
\end{proposition}
\section*{The Verschiebung, Frobenius and Teichmüller maps}
We have various operations on witt vectors that are of interest.
\begin{definition}[Restriction map]
    If $T \subseteq S$ are two truncation sets, the \textit{restriction from S to T}
    \[
      R_T^S \colon \W_S(A) \to \W_T(A)  
    \]
    is a natural ring homomorphism.
\end{definition}
If $S\subseteq \N$ is a truncation set, $n \in \N$, then
\[
   S/n := \{d \in \N \mid nd \in S\}
\]
is again a truncation set.
\begin{definition}[Verschiebung] \
    Define 
    \[
        V_n \colon \W_{S/n} \to \W_S(A);\  
        V_n((a_d)_{d \in S/n})_m := 
        \begin{cases}
            a_d, &\quad \text{if $m=n \cdot d$} \\
            0,  &\quad \text{else}
        \end{cases}
    \]
    which is called the \textit{n-th Verschiebung map}. Furthermore define
    \[
        \widetilde{V_n} \colon A^{S/n} \to A^S;\ 
        \widetilde{V_n}((x_d)_{d \in S/n})_m := 
        \begin{cases}
            n \cdot x_d, &\quad \text{if $m=n \cdot d$} \\
            0,  &\quad \text{else}
        \end{cases}
    \]
\end{definition}
\begin{lemma} \label{lem: verschiebung is additive}
    The Verschiebung map $V_n$ is additive.
\end{lemma}
\begin{bigproof}
    \begin{claim*}
        \begin{tikzcd}
            \W_{S/n}(A) \arrow[r,"w"] \arrow[d,"V_n"]
            & A^{S/n} \arrow[d,"\widetilde{V_n}"]\\
            \W_S(A) \arrow[r,"w"]
            & A^S
        \end{tikzcd}
        commutes.
    \end{claim*}
    \begin{smallproof}
        
    \end{smallproof}
\end{bigproof}
Define $\widetilde{F_n} \colon A^S \to A^{S/n} \ $
by $\widetilde{F_n}((x_m)_{m \in S})_d = x_{nd}$.
\begin{lemma}[Frobenius homomorphism] \label{lem: frobenius}
    There exists a unique natural ring homomorphism
    \[
      F_n \colon \W_S(A) \to \W_{S/n}(A)  
    \]
    such that the diagram 
    \[
        \begin{tikzcd}
            \W_S(A) \arrow[r,"w"] \arrow[d,"F_n"] 
              & A^S \arrow[d,"\widetilde{F_n}"] \\
            \W_{S/n}(A) \arrow[r,"w"]
              & A^{S/n}
        \end{tikzcd}        
    \]
    commutes.
\end{lemma}
\todo{remark und definition haben andere font}

    We call $F_n$ the \textit{nth Frobenius homomorphism}.
    The commutativity of the diagram above is equivalent to
    commutativity of the following diagram for every $d \in S/n$:
    \[
        \begin{tikzcd}
            \W_S(A) \arrow[d,"F_n"] \arrow[dr,"w_{nd}"] \\
            \W_{S/n}(A) \arrow[r,"w_d"'] 
            & A
        \end{tikzcd}
    \]

\begin{proof}[Proof of Lemma~\ref*{lem: frobenius}]
    easy
\end{proof}
\begin{lemma} \label{lem: F_n after F_m is F_{nm}}
    Let $n,m \in \N$.
    Then 
    \[F_n \circ F_m = F_{nm}.\]
\end{lemma}
\begin{beweis}
    \todo{}
\end{beweis}
\begin{definition}[teichmüller representative]
    The \textit{teichmüller representative} is the map
    \[
      \tau \colon A \to \W_S(A)  
    \]
    defined by
    \[
      (\tau(a))_m =   
      \begin{cases}
        a, & \text{if } m = 1\\
        0, & \text{else}
        \end{cases}
    \]
\end{definition}
\begin{lemma} \label{lem: teichmüller is multiplicative}
    The teichmüller map is multiplicative.
\end{lemma}
\begin{beweis}
    The map $\widetilde{\tau} \colon A \to A^S$; $(\widetilde{\tau})_n = a^n$
    is multiplicative and there is a commutative diagram
    \[
        \begin{tikzcd}
              & A \arrow[rd,"\widetilde{\tau}"] \\ %so kann man btw pfeile umdrehen (leftarrow)
            \W_S(A) \arrow[ru, leftarrow,"\tau"] \arrow[rr,"w"]
                && A^S.
        \end{tikzcd}
    \]
    Indeed, $w_n(\tau(a)) = w_n((a,0,0,\dots)) = a^n$
    by definition of $w_n$.

\end{beweis}
\section*{The comonad structure of witt vectors}
We will need the following lemma:
\begin{lemma}\label{lem: non-zero divisor}
    Let $m \in \Z$. If $m$ is a non-zero divisor in A, then it is a
    non-zero divisor in $\W_S(A)$ as well.
\end{lemma}
\begin{beweis}
    \[
    \begin{tikzcd}
        0 \arrow[r]
          & A \arrow[r,"V_n"]
            & \W_S(A) \arrow[r,"R_T^S"]
              & W_T(A) \arrow[r]
                & 0
    \end{tikzcd}
    \]
    which we can extend to the following commutative diagram:
    \[
    \begin{tikzcd}
        0 \arrow[r] 
        & A \arrow[r] \arrow[d,"\cdot m"] 
          & \W_S(A) \arrow[r] \arrow[d,"\cdot m"]
            & \W_T(A) \arrow[d,"\cdot m"] \arrow[r]
                & 0 \\
        0 \arrow[r]
           & A \arrow[r]
            & \W_S(A) \arrow[r]
              & \W_T(A) \arrow[r]
                & 0 
    \end{tikzcd}
    \]
    \todo{finish}
\end{beweis}
\begin{cor} 
    \label{cor: A torsion-free implies W(A) torsion-free}
    If $A$ is torsion-free, then $\W_S(A)$ is torsion-free as well.
\end{cor}
\begin{definition}
    $\W(A) := \W_{\N}(A)$
\end{definition}
For the construction of a natural transformation $\W(A) \to \W(\W(A))$
we want to use Lemma ~\ref{lem: dwork} again. Hence we first show:
\begin{lemma} \label{lem: frobenius lifts frobenius}
    Let $p$ be a prime number, let $A$ be any ring.
    Then the ring homomorphism $F_p \colon \W(A) \to \W(A)$  
    satisfies $F_p(a) \equiv a^p \ mod \ pA.$
\end{lemma}
\begin{proposition} \label{prop: existence of diagonal}
    There exists a unique natural transformation
    \[
      \Delta \colon \W(A) \to \W(\W(A))  
    \]
    such that $w_n(\Delta(a))=F_n(A)$ for all $a \in A, n \in \N$.
\end{proposition}

Recall that by ~\ref{cor: ghost components are nat trafos},
$w_1 \colon \W(A) \to A$; $(a_n)_{n \in \N} \mapsto a_1$
is a natural transformation $\W \Rightarrow \id_{\cat{CRing}}$.
\begin{theorem} \label{thm: comonad structure}
    The functor $\W(\_) \colon \cat{CRing} \to \cat{CRing}$ together with the
    natural transformations $\Delta \colon \W \Rightarrow \W^2,$ $w_1 \colon 
    \W \Rightarrow \id_{\cat{CRing}}$ form a comonad $(\W,w_1,\Delta)$.
\end{theorem}
\begin{bigproof}
    \begin{claim*}
        
        \begin{tikzcd}
            \W(A) \arrow[r,"\Delta_A"] \arrow[d,"\Delta_A"] \arrow[dr,phantom,"\#"]
             & \W(\W(A)) \arrow[d,"\W(\Delta_A)"] \\
            \W(\W(A)) \arrow[r,"\Delta_{\W(A)}"]
              & \W(\W(\W(A)))
        \end{tikzcd}
        commutes.
        
    \end{claim*}
    \begin{smallproof}
        evaluating the ghost coordinates leads to:
        \[
            \begin{tikzcd}
                \W(A) \arrow[r,"\Delta_A",] \arrow[d,"\Delta_A"] \arrow[rr,bend left,"F_A",dotted]
                 & \W(\W(A)) \arrow[d,"\W(\Delta_A)"] \arrow[r,"w",dotted] 
                 & \W(A)^{\N} \arrow[d,"\Delta_A^{\N}",dotted]\\
                \W(\W(A)) \arrow[r,"\Delta_{\W(A)}"] \arrow[rr,bend right,"F_{\W_A}",dotted]
                  & \W(\W(\W(A))) \arrow[r,"w",blue]
                  & \W(\W(A))^{\N}
            \end{tikzcd}  
        \]
        which by ~\ref{prop: existence of diagonal} simplifies to
        \[
            \begin{tikzcd}
                \W(A) \arrow[r,"F_A"] \arrow[d,"\Delta_A"] 
                 & \W(A)^{\N} \arrow[d,"\Delta_A^{\N}"] \\
                \W(\W(A)) \arrow[r,"F_{\W(A)}"]
                  & \W(\W(A))^{\N}
            \end{tikzcd}
        \]
        now it suffices to show for an arbitrary n that the following diagram commutes:
        \[
            \begin{tikzcd}
                \W(A) \arrow[r,"F_{n_A}"] \arrow[d,"\Delta_A"] 
                 & \W(A) \arrow[d,"\Delta_A"] \\
                \W(\W(A)) \arrow[r,"F_{n_{\W(A)}}"]
                  & \W(\W(A))
            \end{tikzcd}
        \]
        evaluating the ghost coordinates again, keeping in mind that by 
        ~\ref{cor: A torsion-free implies W(A) torsion-free}
        and ~\ref{lem: injective ghost map}, 
        $w \colon \W(\W(A)) \to \W(A)^{\N}$ is injective as well, we get
        \[
            \begin{tikzcd}
                \W(A) \arrow[r,"F_{n_A}"] \arrow[d,"\Delta_A"] 
                 & \W(A) \arrow[d,"\Delta_A"] \arrow[dd,bend left = 60,"F_A",dotted]\\
                \W(\W(A)) \arrow[r,"F_{n_{\W(A)}}"] \arrow[d,"w",dotted]
                  & \W(\W(A)) \arrow[d,"w",blue] \\
                \W(A)^{\N} \arrow[r,"\widetilde{F_n}_{\W(A)}",dotted]
                & \W(A)^{\N}
            \end{tikzcd}
        \]
        using the fact that 
        \begin{tikzcd}
            \W(\W(A)) \arrow[d,"w",dotted] \arrow[rd,"w_{nm}",dotted]\\
            \W(A)^{\N} \arrow[r,"\widetilde{F_n}_{\W(A)}",dotted]
            & \W(A)^{\N}
        \end{tikzcd}
        commutes, we can simplify the situation to
        \[
            \begin{tikzcd}
            \W(A) \arrow[r,"F_n"] \arrow[d,"\Delta_A"] \arrow[rd,"F_{nm}",dotted]
                 & \W(A) \arrow[d,"F_m"] \\
                \W(\W(A)) \arrow[r,"w_{nm}"] 
                  & \W(A) \\
            \end{tikzcd}
        \]
        which can again be simplified to
        \[
            \begin{tikzcd}
                \W(A) \arrow[r,"F_n"] \arrow[rd,"F_{nm}"']
                & \W(A) \arrow[d,"F_m"]\\
                & \W(A)
            \end{tikzcd}
        \]
        now this commutes by ???, hence we are finished.
    \end{smallproof}
    \begin{claim*}
        \begin{tikzcd}
            \W(A) \arrow[d,"\Delta_A"'] \arrow[rd,"\id_{\W(A)}"]\\
            \W(\W(A)) \arrow[r,"\W(w_1)"']
            & \W(A) 
        \end{tikzcd}
        commutes.
    \end{claim*}
    \begin{smallproof}
        evaluate the ghost coordinates:
        \[
            \begin{tikzcd}
                \W(A) \arrow[d,"\Delta_A"'] \arrow[rd,"\id_{\W(A)}"] 
                \arrow[dd,bend right = 60,"F"',dotted]\\
                \W(\W(A)) \arrow[r,"\W(w_1)"'] \arrow[d,"w",dotted]
                & \W(A) \arrow[d,"w",blue] \\
                \W(A)^{\N} \arrow[r,"w_1^{\N}",dotted]
                & A^{\N}
            \end{tikzcd}
        \]
    we can then simplify to
    \[
        \begin{tikzcd}
            \W(A) \arrow[d,"F"'] \arrow[rd,"w"] \\
            \W(A)^{\N} \arrow[r,"w_1^{\N}"'] 
            & A^{\N}
        \end{tikzcd}
    \]
    now it suffices to show for all $n$ that 
    \[
      \begin{tikzcd}
        \W(A) \arrow[d,"F_n"'] \arrow[dr,"w_n"]\\
        \W(A) \arrow[r,"w_1"'] 
        & A
      \end{tikzcd}
    \]
    commutes, which is true by ??? ($\eps = w_1$).

    \end{smallproof}
    \begin{claim*}
        \begin{tikzcd}
            & \W(A) \arrow[d,"\Delta_A"] \arrow[ld,"\id_{\W(A)}"'] \\
            \W(\W(A))  & \W(A) \arrow[l,"\eps_{\W(A)}"]
        \end{tikzcd}
        commutes.
    \end{claim*}
    \begin{smallproof} 
        Let $a \in \W(A)$. \\
        $\eps(\Delta_A(a)) = w_1(\Delta_A(a)) = F_1(a) = a$,
        since $F_1 = \id_{\W(A)}$.
    \end{smallproof}
    This concludes the proof.
\end{bigproof}
\section*{The Teichmüller map induces a morphism of comonads}
We now consider another example of a comonad; the \textit{free monoid comonad}.
\todo{maybe ins Kapitel Comonaden als Beispiel schieben}
\begin{definition}[monoid ring]
    Let $R$ be a ring and let $G$ be a monoid.
    The \textit{monoid ring} of $G$ over $R$, denoted $R[G]$ or $RG$
    is the set of formal finite sums $\sum_{g \in G}r_g \cdot g$
    with addition and multiplication defined by:
    \begin{align*}
        \sum_{g \in G}r_g \cdot g + \sum_{g \in G}s_g \cdot g
        & := \sum_{g \in G}(r_g + s_g)\cdot g \\
        \sum_{g \in G}r_g \cdot g \cdot \sum_{g \in G}s_g \cdot g
        & := \sum_{g \in G}(\sum_{k \cdot l = g} r_k \cdot s_l)\cdot g 
    \end{align*}
\end{definition}
\begin{example}
    $R = \R, G = \{x^n \mid n \in \N\} \implies RG = \R[X]$
\end{example}
\begin{remark} \label{rem: universal property of monoid ring}
$R[G]$ together with the ring homomorphism $\alpha \colon R \to R[G]$;
$r \mapsto r \cdot 1$ and the monoid homomorphism $\beta \colon 
G \to R[G]$; $g \mapsto 1 \cdot g$ 
enjoys the following universal property:
\[
  \alpha(r) \cdot \beta(g) = \beta(g) \cdot \alpha(r)
   \quad \forall r \in R, g \in G
\]
and if $(S,\alpha',\beta')$ is another such triple with
$\alpha'(r) \cdot \beta'(g) = \beta'(g) \cdot \alpha'(r)
   \quad \forall r \in R, g \in G$,
there is a unique monoid homomorphism $\gamma \colon R[G] \to S$
such that the following diagram commutes:
\[
    \begin{tikzcd}
        & S \\
        R \arrow[r,"\alpha"'] \arrow[ur,"\alpha'"] 
        & R[G] \arrow[u,"\gamma",dotted] 
        & G \arrow[l,"\beta"] \arrow[ul,"\beta'"']
    \end{tikzcd}
\]
Here, $\gamma$ is defined by 
$\sum_{g \in G}r_g \cdot g \mapsto \sum_{g \in G}\alpha'(r_g) \cdot \beta'(g)$.
\end{remark}
\begin{example}
    Let $S$ be a ring, $G$ be a monoid.
    Since there is a unique ring homomorphism $\Z \to S$, 
    each monoid homomorphism $G \to S$ induces a unique ring homomorphism
    $\Z G \to S$ such that the following commutes:
    \[
      \begin{tikzcd}
        G \arrow[r] \arrow[rd] 
        &S \\
        & \Z G \arrow[u]
      \end{tikzcd}
    \]
    Now if $H$ is another monoid and $f \colon G \to H$ a monoid morphism,
    $G \xrightarrow{f} H \to \Z H$ is a monoid homomorphism,
    hence it extends uniquely to $f \colon \Z G \to \Z H$,
    $\sum_{g \in G}r_g \cdot g \mapsto \sum_{g \in G}r_g \cdot f(g)$.\\ 
    In this way, the free monoid ring construction over $\Z$ is functorial.
\end{example}

Let $G \colon \cat{CRing} \to \cat{CMon}$, $(R,+,\cdot) \mapsto (R,\cdot)$
be the forgetful functor and
let $F \colon \cat{CMon} \to \cat{CRing}$ be the \textit{free monoid ring functor},
$G \mapsto \Z G$.
\begin{proposition} \label{prop: adjunction monoid ring}
    There is an adjoint situation \begin{tikzcd}
        \cat{CMon}
            \arrow[r, bend left = 25, "F"{name=D}]
            \arrow[r, leftarrow, bend right = 25, swap, "G"{name=C}]
              \arrow[d, from=D, to=C, phantom, "{\bot}"]
          & \cat{CRing}
    \end{tikzcd}
\end{proposition}
Now consider the \textit{teichmüller map} $\tau \colon A \to \W(A); 
a \mapsto (a,0,0,0,\dots)$.
$\tau$ is multiplicative and preserves the unit, hence it extends uniquely to 
a ring homomorphism
\[
\tau \colon \Z A \to \W(A)
\]
\begin{theorem} \label{thm: morphism of comonads}
    $\tau \colon \Z A \to \W(A)$ is a morphism of comonads.
\end{theorem}

